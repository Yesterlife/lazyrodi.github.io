<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Android permission | Lazy Rodriguez</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="android,permission" />
    
    <meta name="description" content="안드로이드는 privilege-separated OS이다. 각각의 어플리케이션들은 서로 다른 system ID(Linux의 User ID 또는 Group ID)로 구분된다.
안드로이드 시스템의 보안 기능은 세분화 되어있으며 Permission Mechanism에 의해 동작한다.
안드로이드 시스템은 시스템 자체의 무결성(Integrity)과 개인 정보 보호를">
<meta property="og:type" content="article">
<meta property="og:title" content="Android permission">
<meta property="og:url" content="http://lazyrodi.github.io/2016/07/10/2016-07-10-android-permission/index.html">
<meta property="og:site_name" content="Lazy Rodriguez">
<meta property="og:description" content="안드로이드는 privilege-separated OS이다. 각각의 어플리케이션들은 서로 다른 system ID(Linux의 User ID 또는 Group ID)로 구분된다.
안드로이드 시스템의 보안 기능은 세분화 되어있으며 Permission Mechanism에 의해 동작한다.
안드로이드 시스템은 시스템 자체의 무결성(Integrity)과 개인 정보 보호를">
<meta property="og:updated_time" content="2016-08-08T14:21:14.611Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android permission">
<meta name="twitter:description" content="안드로이드는 privilege-separated OS이다. 각각의 어플리케이션들은 서로 다른 system ID(Linux의 User ID 또는 Group ID)로 구분된다.
안드로이드 시스템의 보안 기능은 세분화 되어있으며 Permission Mechanism에 의해 동작한다.
안드로이드 시스템은 시스템 자체의 무결성(Integrity)과 개인 정보 보호를">
    

    

    
        <link rel="icon" href="https://raw.githubusercontent.com/lazyrodi/misc/master/assets/logo_lazyrodi/favicon.ico" />
    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/titillium-web/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/fancybox/jquery.fancybox.css">
    
    
        <link rel="stylesheet" href="/vendor/scrollLoading/style.css">
    
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/bookmark/">Bookmark</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/keywords/">Keywords</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/">Dev</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/Algorithm/">Algorithm</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/Ruby-on-rails/">Ruby on rails</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/Spring/">Spring</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/TroubleShooting/">TroubleShooting</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/android/">android</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/common/">common</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/database/">database</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/etc/">etc</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/interview/">interview</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/java/">java</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/linux/">linux</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/network/">network</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Dev/pattern/">pattern</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/docs/">docs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/hr/">hr</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/life/">life</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/works/">works</a></li></ul>
                                    
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Dev/">Dev</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/Dev/android/">android</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- github-001 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5237023707102425"
     data-ad-slot="5100567191"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
                            <article id="post-2016-07-10-android-permission" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Android permission
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                <a href="/2016/07/10/2016-07-10-android-permission/" class="article-date">
    <time datetime="2016-07-10T10:47:50.000Z" itemprop="datePublished">2016-07-10</time>
</a>
                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/permission/">permission</a></li></ul>

            </div>
        
        <div class="article-entry" itemprop="articleBody">
            <div class="lazyrodi-toc">
                
            </div>
            <p>안드로이드는 privilege-separated OS이다. 각각의 어플리케이션들은 서로 다른 system ID(Linux의 User ID 또는 Group ID)로 구분된다.</p>
<p>안드로이드 시스템의 보안 기능은 세분화 되어있으며 <code>Permission Mechanism</code>에 의해 동작한다.</p>
<p>안드로이드 시스템은 시스템 자체의 <code>무결성(Integrity)</code>과 <code>개인 정보 보호</code>를 위해 각 어플리케이션이 <code>sandbox</code>(보호된 영역) 내에서만 동작하도록 제한해 두었다.</p>
<p>어플리케이션이 자신의 <code>sandbox</code> 밖의 리소스, 파일 등의 사용을 원할 때에는 명시적으로 해당 <code>permission</code>에 대해 요청하고 획득해야 한다.</p>
<p><code>Permission</code>은 특정 프로세스가 특정 기능을 수행하기 위해 필요한 권한을 의미하며, 사용자가 허가를 해야 사용할 수 있다.</p>
<p>안드로이드의 System permission은 두 가지 종류로 나눌 수 있다. (<a href="https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous" target="_blank" rel="external">Normal and Dangerous Permissions</a> 참조)</p>
<ul>
<li><code>Normal permissions</code><ul>
<li>다른 프로세스, 데이터, 사용자에게 악영향을 주지 못하는 권한들.</li>
</ul>
</li>
<li><code>Dangerous permissions</code><ul>
<li>파일 저장 및 운용, 주소록 접근 등 다른 요소에 악영향을 줄 수도 있는 권한들.</li>
</ul>
</li>
</ul>
<p>안드로이드 시스템은 어플리케이션이 <code>Normal permissions</code>을 요청하면 자동으로 권한을 부여하고, <code>Dangerous permissions</code>를 요청하면 <code>사용자에게 Dialog를 통해 확인(Dangerous permissions)</code>을 받은 후 허가를 해준다.</p>
<p>사용자에게 확인을 받는 동작은 안드로이드 버전에 따라 다르게 동작한다.</p>
<ul>
<li>Android 5.1 (Lollipop) 이하<ul>
<li>어플리케이션 설치 시 사용할 permission들에 대해 사용자의 허가를 받음.</li>
</ul>
</li>
<li>Android 6.0 (Marshmallow) 이상<ul>
<li>Runtime에 permission을 부여할지 묻는다.</li>
</ul>
</li>
</ul>
<hr>
<h2 id="System-Permissions"><a href="#System-Permissions" class="headerlink" title="System Permissions"></a>System Permissions</h2><h3 id="Security-architecture"><a href="#Security-architecture" class="headerlink" title="Security architecture"></a>Security architecture</h3><p>안드로이드는 기본적으로 <code>Permission</code>이 없으면 하나의 어플리케이션이 다른 어플리케이션, OS, user에게 위해를 가할 수 없다.</p>
<p>예를 들어, <code>permission</code> 없이는 주소록이나 이메일 등의 접근할 수 없고 다른 어플리케이션에 속한 파일에 접근할 수 없다는 뜻이다.</p>
<p>어플리케이션은 필요로 하는 <code>permission</code>에 대해 Application Manifest 파일에 static하게 선언해야 한다.</p>
<p><code>&lt;uses-permission&gt;</code> 태그를 이용하며, 아래의 예시는 SMS의 발신 권한을 획득하기 위한 선언이다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">        <span class="attr">package</span>=<span class="string">"com.example.snazzyapp"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.SEND_SMS"</span>/&gt;</span></div><div class="line">    </div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">...</span>&gt;</span></div><div class="line">        ...</div><div class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></figure>
<p>어플리케이션 Sandbox는 어플리케이션이 어떻게 빌드 되었던 간에 독립적으로 동작하며 어플리케이션의 형태(Java, native, hybrid)에 관련 없이 같은 방식, 같은 강도의 보안을 가지고 있다.</p>
<p>Permission의 요청이 실패할 경우 <code>SecurityException</code>을 return받게 된다. 하지만 요청이 실패한다고 해서 반드시 이 exception이 발생하는 것은 아니다.</p>
<p>예를 들어, <code>sendBroadcast(Intent)</code> 메소드는 각각의 receiver로 전달되는 데이터에 대해 permission check를 진행하지만 값이 return될 때 permission failure가 발생했었는지 여부는 알 수 없게 된다.</p>
<p>그래도 대부분 permission failure에 대한 정보는 system log에 남기 때문에 이상 여부를 확인할 수 있다.</p>
<p>사용 가능한 <code>Permission</code>의 종류는 <a href="https://developer.android.com/reference/android/Manifest.permission.html" target="_blank" rel="external">Manifest.permission</a>에서 확인할 수 있다.</p>
<p>아래와 같은 특정한 상황에서는 어플리케이션 동작 중에 별도의 <code>permission</code>을 요구하게 된다.</p>
<ul>
<li>시스템에 대한 호출 시<ul>
<li>어플리케이션이 특정 기능을 무단으로 사용하는 것을 방지하기 위해</li>
</ul>
</li>
<li>Activity가 시작될 때<ul>
<li>다른 어플리케이션의 activity가 임의로 시작되는 것을 막기 위해</li>
</ul>
</li>
<li>Broadcast의 전송/수신 시<ul>
<li>내가 보낸 Broadcast를 누가 받았는지, 누가 나에게 Broadcast를 보냈는지 제어하기 위해</li>
</ul>
</li>
<li>Content provider에 접근 시</li>
<li>Service를 시작하거나 Binding 할 때</li>
</ul>
<h3 id="Application-Signing"><a href="#Application-Signing" class="headerlink" title="Application Signing"></a>Application Signing</h3><p>모든 APK들은 개발자의 private key을 이용한 인증과정을 통해 서명된 상태여야 한다. 서명은 특별히 인증기관 등의 허가를 받는 것은 아니며, 개발자 스스로 생성한 key로 서명할 수 있다.</p>
<p>서명의 목적은 제작자가 누구인지 구분하는 것이다. (복제 방지, 악용 방지)</p>
<p>서명을 통해 시스템은 어플리케이션이 <a href="https://developer.android.com/guide/topics/manifest/permission-element.html#plevel" target="_blank" rel="external">signature-level permissions</a> (normal, dangerous, signature, signatureOrSystem)에 접근할 수 있는 권한을 부여/거부한다.</p>
<p>어플리케이션이 <a href="https://developer.android.com/guide/topics/manifest/manifest-element.html#uid" target="_blank" rel="external">다른 어플리케이션과 동일한 Linux ID를 사용</a>하려 할 때에도 서명 정보를 필요로 한다.</p>
<h3 id="User-ID와-File-access"><a href="#User-ID와-File-access" class="headerlink" title="User ID와 File access"></a>User ID와 File access</h3><p>어플리케이션 설치 시 안드로이드는 각각의 package에 각각 다른 Linux user ID를 부여한다. 이는 상수값이며 해당 package가 죽을 때까지 가지고 있는다.</p>
<p>보안 권한은 Process level에 존재하고, 일반적으로 서로 다른 두 개의 package가 하나의 process에서 수행되는 일은 없다. 보통 서로 다른 Linux user로 동작한다.</p>
<p>하지만 AndroidManifest.xml의 manifest tag 내에 <a href="https://developer.android.com/reference/android/R.attr.html#sharedUserId" target="_blank" rel="external">sharedUserId</a> 속성을 사용하게 되면 서로 다른 package들이 같은 user ID를 사용할 수도 있다.</p>
<p>이 방법을 통해, 보안을 목적으로 하는 두 개의 package가 하나의 어플리케이션인척 행동하게 된다. 이 때 user ID 및 file에 대한 권한을 동일하게 갖는다.</p>
<p>보안을 유지하기 위해 동일한 서명을 사용한 어플리케이션 중 단 두 개의 어플리케이션만 동일한 user ID를 사용할 수 있다.</p>
<p>어플리케이션이 저장한 data들은 해당 어플리케이션의 user ID에 할당되며, 기본적으로 다른 package에서는 접근이 불가하다.</p>
<p>어플리케이션이 새로 만들거나 저장하는 파일들에 대한 메소드는 다음과 같다.</p>
<ul>
<li>getSharedPreferences(String, int)</li>
<li>openFileOutput(String, int)</li>
<li>openOrCreateDatabase(String, int, SQLiteDatabase.CursorFactory)</li>
</ul>
<p>만약 다른 package들이 read/write를 할 수 있게 하려면 <code>MODE_WORLD_READABLE</code>, <code>MODE_WORLD_WRITEABLE</code> flag를 사용해야 한다. 이 flag들을 사용하여도 소유권은 변하지 않는다.</p>
<h3 id="Automatic-permission-adjustments"><a href="#Automatic-permission-adjustments" class="headerlink" title="Automatic permission adjustments"></a>Automatic permission adjustments</h3><p>시간이 지나면서(새로운 sdk가 나오면) 이전에는 없던 permission이 만들어지기도 한다. 해당 permission이 만들어지기 전에 생성된 어플리케이션은 당연히 권한 없이도 이를 사용할 수 있다는 가정 하에 개발되었기 때문에 관련 기능을 사용하려면 에러가 날 수도 있다.</p>
<p>에러를 방지하기 위해 안드로이드는 Manifest에 새 permission에 대한 코드를 추가한다. 추가할지 말지 결정하는 근거가 되는 것이 <code>targetSdkVersion</code> 이며, 이 값이 permission이 생성된 버전보다 낮다면 안드로이드는 permission을 추가한다.</p>
<p>예를 들어, <code>WRITE_EXTERNAL_STORAGE</code> permission은 공유된 저장소에 접근하는 것을 제한하기 위해 API level 4에 만들어졌다. 만약 <code>targetSdkVersion</code>이 3보다 낮다면 이 permission은 자동으로 추가된다.</p>
<p>만약 이 경우처럼 자동으로 permission이 추가되는 경우, Google Play에서 이러한 권한들에 대해 보여주게 된다. (실제로 그 어플리케이션에서 사용하지 않더라도 보여준다.)</p>
<p>사용하지 않는 permission을 제거하기 위해서는 어플리케이션의 <code>targetSdkVersion</code>을 항상 최신화하여 유지하는 것이 좋다. <a href="https://developer.android.com/reference/android/os/Build.VERSION_CODES.html" target="_blank" rel="external">Build.VERSION_CODES</a>를 통해 각 버전 별로 업데이트 된 permission 목록을 확인할 수 있다.</p>
<h3 id="Permission-groups"><a href="#Permission-groups" class="headerlink" title="Permission groups"></a>Permission groups</h3><p>모든 <code>dangerous Android system permission</code>은 <code>permission group</code>에 속해있다. </p>
<p>Permission이 같은 group에 속한 경우 사용자에게 한 번만 사용 허가를 받으면 같은 group에 속한 다른 permission들도 사용할 수 있다.</p>
<p>예를 들어, <code>READ_CONTACTS</code>에 대한 권한을 사용자로부터 허가받아 부여받았다면, <code>WRITE_CONTACTS</code> 권한은 자동으로 부여받는다.</p>
<p>[표 1. Dangerous permissions and permission groups]</p>
<p>|————-+——————————|<br>| CALENDAR | READ_CALENDAR |<br>|          | WRITE_CALENDAR |<br>| CAMERA   | CAMERA |<br>| CONTACTS | READ_CONTACTS |<br>|          | WRITE_CONTACTS |<br>|          | GET_ACCOUNTS |<br>| LOCATION | ACCESS_FINE_LOCATION |<br>|          | ACCESS_COARSE_LOCATION |<br>| MICROPHONE | RECORD_AUDIO |<br>| PHONE | READ_PHONE_STATE |<br>|       | CALL_PHONE |<br>|       | READ_CALL_LOG |<br>|       | WRITE_CALL_LOG |<br>|       | ADD_VOICEMAIL |<br>|       | USE_SIP |<br>|       | PROCESS_OUTGOING_CALLS |<br>| SENSORS | BODY_SENSORS |<br>| SMS | SEND_SMS |<br>|     | RECEIVE_SMS |<br>|     | READ_SMS |<br>|     | RECEIVE_WAP_PUSH |<br>|     | RECEIVE_MMS |<br>| STORAGE | READ_EXTERNAL_STORAGE |<br>|         | WRITE_EXTERNAL_STORAGE |</p>
<h3 id="Permission의-정의-및-제한"><a href="#Permission의-정의-및-제한" class="headerlink" title="Permission의 정의 및 제한"></a>Permission의 정의 및 제한</h3><p>Permission을 적용하기 위해서는 <code>AndroidManifest.xml</code>에 <code>&lt;permission&gt;</code> 태그를 사용하여 정의해야 한다.</p>
<p>아래의 예시는 어플리케이션이 자신이 가진 activity 중 하나를 시작하는 권한을 다른 어플리케이션에게 부여하기 위해 permission을 선언한 것이다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"</div><div class="line">    package="com.example.myapp" &gt;</div><div class="line">    &lt;permission android:name="com.example.myapp.permission.DEADLY_ACTIVITY"</div><div class="line">        android:label="@string/permlab_deadlyActivity"</div><div class="line">        android:description="@string/permdesc_deadlyActivity"</div><div class="line">        android:permissionGroup="android.permission-group.COST_MONEY"</div><div class="line">        android:protectionLevel="dangerous" /&gt;</div><div class="line">    ...</div><div class="line">&lt;/manifest&gt;</div></pre></td></tr></table></figure>
<p>참고로 모든 package가 동일한 인증서로 서명하지 않은 한, 여러 package가 동일한 이름의 permission을 선언할 수는 없다.</p>
<p>하나의 Package가 permission을 선언한 경우 시스템은 같은 permission 이름을 가진 다른 package가 시스템에 설치되는 것을 막는다. 물론 이미 설치되어 있는 package와 동일한 서명을 가지고 있다면 설치를 허가한다.</p>
<p>이런 충돌을 피하기 위해 안드로이드에서는 <code>reverse-domain-style naming</code>을 추천한다. ex. <code>com.example.myapp.ENGAGE_HYPERSPACE</code></p>
<p>위의 예시에서 하나하나 살펴보면;</p>
<ul>
<li>protectionLevel<ul>
<li>Mandatory 항목이다.</li>
<li>시스템이 어플리케이션이 이 권한을 필요로 하는 이유 또는 이 권한을 가지고 있는 것들이 무엇인지 사용자에게 알려주기 위한 속성이다.</li>
<li>아래 AndroidManifestPermission_protectionLevel 을 살펴보자.</li>
</ul>
</li>
<li>android:permissionGroup<ul>
<li>Optional 항목이다.</li>
<li>시스템이 권한에 대해 사용자에게 보여줄 때에만 사용된다. 대부분의 경우, <code>standard system group</code>(<a href="https://developer.android.com/reference/android/Manifest.permission_group.html" target="_blank" rel="external">android.Manifest.permission_group</a>)으로 설정하게 된다.<ul>
<li>CALENDAR</li>
<li>CAMERA</li>
<li>CONTACTS</li>
<li>LOCATION</li>
<li>MICROPHONE</li>
<li>PHONE</li>
<li>SENSORS</li>
<li>SMS</li>
<li>STORAGE</li>
</ul>
</li>
<li>개발자가 직접 정의할 수도 있다. 하지만 왠만하면 기존에 있는 것으로 사용하자.</li>
<li>안드로이드 폰에서 설정 &gt; 앱 &gt; 앱 설정 &gt; 앱 권한 으로 가면 <code>permissionGroup</code>으로 묶여있는 것을 확인할 수 있다.</li>
</ul>
</li>
<li>android:label</li>
<li>android:description<ul>
<li>label 및 description은 사용자가 permission list 확인 시 보여줄 제목 및 상세 내용이다. 새로 추가해야 한다면 가능한 짧게 작성하라.</li>
</ul>
</li>
</ul>
<p>아래는 <code>CALL_PHONE</code> permission에 대한 label 및 description 예시이다.</p>
<p><code>$ adb shell pm list permissions</code> 명령어를 통해 현지 시스템에서 사용하고 있는 권한들을 확인할 수 있다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;string name="permlab_callPhone"&gt;directly call phone numbers&lt;/string&gt;</div><div class="line">&lt;string name="permdesc_callPhone"&gt;Allows the application to call</div><div class="line">    phone numbers without your intervention. Malicious applications may</div><div class="line">    cause unexpected calls on your phone bill. Note that this does not</div><div class="line">    allow the application to call emergency numbers.&lt;/string&gt;</div></pre></td></tr></table></figure>
<h4 id="AndroidManifestPermission-protectionLevel"><a href="#AndroidManifestPermission-protectionLevel" class="headerlink" title="AndroidManifestPermission_protectionLevel"></a>AndroidManifestPermission_protectionLevel</h4><p>|———————–+——————-+———————|<br>| Constant | Value | Description |<br>| normal | 0 | 낮은 위험도를 가진 permission. 어플리케이션이 다른 어플리케이션에 별다른 영향을 주지 않는 부분으로 접근을 시도한다. 시스템은 이 권한을 요청하는 어플리케이션에게 권한을 자동적으로 부여한다. |<br>| dangerous | 1 | 높은 위험도를 가진 permission. 어플리케이션이 개인 정보 및 디바이스를 나쁜 목적으로 사용이 가능하다. 시스템은 이 권한을 자동으로 부여하지 않고 사용자에게 허가를 요구하는 dialog 를 띄워서 허가를 받는다. |<br>| signature | 2 | 같은 인증서로 서명된 어플리케이션에게만 이 권한을 허가한다. 인증서가 동일한 것이 판명되면 시스템은 자동적으로 권한을 부여한다. |<br>| signatureOrSystem | 3 | 안드로이드 시스템 이미지 내의 package 또는 같은 인증서로 서명된 어플리케이션에게만 권한을 허가한다. 이 옵션은 피해야 하며, Signature protection level은 대부분의 요구를 충족시켜야 하고 어플리케이션이 어디에 설치되었건 정확하게 동작해야 한다. |<br>| privileged | 0x10 | base permission type으로부터 파생된 추가적인 flag로 이 permission은 시스템 이미지에 설치된 privileged app들에 부여될 수 있다. 이 옵션은 피해야 하며, Signature protection level은 대부분의 요구를 충족시켜야 하고 어플리케이션이 어디에 설치되었건 정확하게 동작해야 한다. |<br>| system | 0x10 | “privileged”와 동일하다. 이전에 사용하던 용어. |<br>| development | 0x20 | base permission type으로부터 파생된 추가적인 flag로 개발용 어플리케이션에 선택적으로 부여될 수 있다. |<br>| appop | 0x40 | base permission type으로부터 파생된 추가적인 flag로 제어 권한을 위한 app op과 밀접한 관련을 가지고 있음. |<br>| pre23 | 0x80 | base permission type으로부터 파생된 추가적인 flag로 Marshmallow 이전 버전의 API level을 갖는 어플리케이션들에게 자동으로 부여된다. (runtime permission 부여를 지원하지 않는 버전들) |<br>| installer | 0x100 | base permission type으로부터 파생된 추가적인 flag로 시스템 어플리케이션 권한을 가진 어플리케이션들에게 자동으로 부여된다. |<br>| verifier | 0x200 | base permission type으로부터 파생된 추가적인 flag로 시스템 어플리케이션 권한을 가진 어플리케이션들에게 자동으로 부여된다. |<br>| preinstalled | 0x400 | base permission type으로부터 파생된 추가적인 flag로 시스템 이미지 위에 미리 설치되는 어플리케이션들(privileged 어플리케이션을 포함한)에게 자동으로 부여된다. |<br>| setup | 0x800 | base permission type으로부터 파생된 추가적인 flag로 setup wizard 어플리케이션에게 자동으로 부여된다. |</p>
<h3 id="Custom-permission-이렇게-사용하라"><a href="#Custom-permission-이렇게-사용하라" class="headerlink" title="Custom permission, 이렇게 사용하라."></a>Custom permission, 이렇게 사용하라.</h3><ul>
<li>여러 어플리케이션을 묶어서 제품군을 설계할 때, 각각의 permission이 단 한번만 정의될 수 있도록 설계해야 한다.</li>
<li>서로 다른 어플리케이션이 같은 인증서로 서명한 경우 signature check를 통해 중복으로 permission을 정의하는 것을 막을 수 있다.</li>
<li>하나의 제품군을 개발하는 경우 이 모든 제품군의 permission을 관리하는 하나의 pacakage를 개발하는 것이 좋다. 이 package는 특별히 서비스를 제공하진 않고 permission을 관리할 뿐이며, 제품군에 속한 다른 어플리케이션들은 <uses-permission>만 사용하게끔 한다.</uses-permission></li>
</ul>
<h3 id="AndroidManifest-xml의-permission-제한"><a href="#AndroidManifest-xml의-permission-제한" class="headerlink" title="AndroidManifest.xml의 permission 제한"></a>AndroidManifest.xml의 permission 제한</h3><p>개발자는 AndroidManifest.xml을 통해 시스템 또는 어플리케이션의 모든 컴포넌트에 접근 제한을 걸 수 있다. 이를 위해 컴포넌트 별로 <code>android:permission</code> 속성을 선언하고 해줘야 한다.</p>
<ul>
<li>Activity permissions (<activity>)<ul>
<li>관련된 activity를 실행할 수 있는 권한을 나타낸다. 이 permission은 <code>Context.startActivity()</code>와 <code>Activity.startActivityForResult()</code> 실행 시 체크된다. 만약 호출한 측이 permission을 가지지 않았다면 <code>SecurityException</code>이 발생한다.</li>
</ul>
</activity></li>
<li>Service permissions (<service>)<ul>
<li>관련된 service에 bind할 수 있는 권한을 나타낸다. 이 permission은 <code>Context.startService()</code>, <code>Context.stopService()</code>, <code>Context.bindService()</code> 실행 시 체크된다. 만약 호출한 측이 permission을 가지지 않았다면 <code>SecurityException</code>이 발생한다.</li>
</ul>
</service></li>
<li>BroadcastReceiver permissions (<receiver>)<ul>
<li>관련된 receiver로 broadcast를 보낼 수 있는 권한을 나타낸다. <code>Context.sendBroadcast()</code>가 return될 때 permission 체크가 이루어지며, 시스템은 broadcast를 정해진 receiver로 전달하려 한다. Permission이 없는 경우 호출한 측으로 result가 제대로 전달되지 않고 exception이 전달된다.</li>
<li>이 Permission은 <code>Context.registerReceiver</code>를 통해 동적으로 등록할 수도 있다.</li>
<li>다른 방법으로 <code>Context.sendBroadast()</code> 호출 시 permission을 명시하여 broadcast를 수신할 수 있는 BroadcastReceiver를 제한할 수 있다.</li>
</ul>
</receiver></li>
<li>ContentProvider permissions (<provider>)<ul>
<li>ContentProvider 내의 data에 접근하는 것을 제한할 수 있다(ContentProvider는 URI permission이라 불리는 중요한 추가 보안 기능을 가지고 있다.).</li>
<li>다른 컴포넌트들과는 다르게 두 개의 permission attribute를 설정할 수 있다. write 권한을 가지고 있다고 해도 read할 수 없다.<ul>
<li><code>android:readPermission</code></li>
<li><code>android:writePermission</code></li>
</ul>
</li>
<li>최초 provider를 찾을 때(retrieve) permission에 대해 체크하며 두 개의 permission 모두 없다면 <code>SecurityException</code>이 발생한다.</li>
<li><code>ContentResolver.query()</code>는 <code>read permission</code>을 요구하며, <code>ContentResolver.insert(), ContentResolver.update(), ContentResolver.delete()</code>는 <code>write permission</code>을 요구한다.</li>
</ul>
</provider></li>
</ul>
<h3 id="Sending-Broadcast-시의-Permission-제한"><a href="#Sending-Broadcast-시의-Permission-제한" class="headerlink" title="Sending Broadcast 시의 Permission 제한"></a>Sending Broadcast 시의 Permission 제한</h3><p>BroadcastReceiver를 regist하는 것(<code>Context.registerReceiver()</code>)에 더하여 broadcast를 보낼 때 필요한 permission을 지정할 수도 있다. <code>Context.sendBroadcast()</code> 호출 시 permission string을 포함하여 보내면 해당 permission을 가지고 있는 receiver만 수신할 수 있다.</p>
<p><code>receiver</code>와 <code>broadcaster</code> 모두 permission을 가지고 있어야 한다.</p>
<h3 id="Permission을-제한하는-다른-방법"><a href="#Permission을-제한하는-다른-방법" class="headerlink" title="Permission을 제한하는 다른 방법"></a>Permission을 제한하는 다른 방법</h3><p>다른 프로세스가 현재 프로세스의 Service 등을 호출했을 때 <code>Context.checkCallingPermission()</code>을 사용할 수 있으며 return값인 <code>PERMISSION_GRANTED</code>, <code>PERMISSION_DENIED</code> 로 호출한 프로세스가 권한을 가지고 있는지 확인할 수 있다.</p>
<p>Permission 체크를 위한 두 가지 방법이 더 있다.</p>
<ul>
<li>다른 프로세스의 PID(Process Identifier)를 알고있다면 <code>Context.checkPermission(String, int, int)</code>를 사용할 수 있다.</li>
<li>다른 어플리케이션의 Package name을 알고있다면 <code>PackageManager.checkPermission(String, String)</code>을 사용할 수 있다.</li>
</ul>
<hr>
<h2 id="URI-Permission"><a href="#URI-Permission" class="headerlink" title="URI Permission"></a>URI Permission</h2><p>Content provider 사용 시 <code>standard permission system</code>에 기술된 내용은 충분하지 않다.</p>
<p>Content provider는 직접적인 client는 물론 다른 어플리케이션이 동작하기 위한 특정한 URI를 다룰 때 read/write permission을 통해 스스로를 보호하기를 원한다.</p>
<p>대표적인 예로, Mail 어플리케이션에서의 파일 첨부 기능을 보자. Mail로의 접근은 user-data의 보호를 위해 permission으로 막혀있다. Image 첨부 기능의 URI가 Image viewer에 제공되어 있다 하더라도, Image viewer는 permission이 없기 때문에 첨부 파일을 열 수 없다.</p>
<p>이 문제의 해결책이 <code>per-URI permission</code>이다. Activity가 시작되거나 result가 activity로 return될 때 Caller는 <code>Intent.FLAG_GRANT_READ_URI_PERMISSION</code> 또는 <code>Intent.FLAG_GRANT_WRITE_URI_PERMISSION</code>을 설정할 수 있다.</p>
<p>이는 별도로 Content provider의 data 접근을 위한 permission을 가질 필요 없이 Intent 내의 특정 data URI를 통해 activity permission을 받겠다는 의미이다.</p>
<p>이 동작 방식은 파일 열기, 주소록 선택 등의 사용자와의 상호 작용 발생 시 임시로 권한을 허가하는, 일반적인 capability-style 모델을 가능케 한다. 또한, 어플리케이션이 쓸데없는 permission을 갖게지 않게하는데 핵심적인 역할을 한다.</p>
<p>URI permission의 권한 부여을 위해 해당 URI들을 가지고 있는 Content provider는 자신이 이 기능을 구현하고 있다는 것을 알리기 위해 <code>android:grantUriPermissions</code> 속성을 선언하거나 <code>&lt;grant-uri-permissions&gt;</code> tag를 선언해야 한다.</p>
<p>아래와 같은 방식으로 Flag를 세팅할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">startActivity(</div><div class="line">        <span class="keyword">new</span> Intent(Intent.ACTION_VIEW)</div><div class="line">            .setDataAndType(uri, type)</div><div class="line">            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET)</div><div class="line">            .addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)</div><div class="line">    );</div></pre></td></tr></table></figure>
<hr>
<h2 id="Permission-사용하기"><a href="#Permission-사용하기" class="headerlink" title="Permission 사용하기"></a>Permission 사용하기</h2><h3 id="Permission-확인"><a href="#Permission-확인" class="headerlink" title="Permission 확인"></a>Permission 확인</h3><p>어플리케이션에서 <code>Dangerous permission</code>의 사용을 요청할 경우 사용할 때마다 permission을 얻은 상태인지 체크 해야하며,</p>
<p><code>ContextCompat.checkSelfPermission()</code> 메소드를 사용하면 된다.</p>
<p>아래는 캘린더 작성 permission에 대한 Android의 예시이다.</p>
<p>Permission을 획득했다면 <code>PackageManager.PERMISSION_GRANTED</code>가 return될 것이며, permission이 없다면 <code>PERMISSION_DENIED</code>가 return될 것이다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Assume thisActivity is the current activity</span></div><div class="line"><span class="keyword">int</span> permissionCheck = ContextCompat.checkSelfPermission(thisActivity,</div><div class="line">        Manifest.permission.WRITE_CALENDAR);</div></pre></td></tr></table></figure>
<h3 id="Permission-요청하기"><a href="#Permission-요청하기" class="headerlink" title="Permission 요청하기"></a>Permission 요청하기</h3><p>사용자가 한 번 거부한 permission에 대해서는 설명을 추가(ex. Don’t ask again 체크박스)해야 하는데 한 번 거부한 permission인지 알 수 있는 방법은 <code>shouldShowRequestPremissionRationale()</code> 메소드를 사용하는 것이다. 만약 이전에 사용자가 DENY처리한 적이 있다면 true가 return된다.</p>
<p>어플리케이션이 permission을 아직 안 가지고 있을 경우 <code>requestPremissions()</code>를 호출해야 한다. </p>
<p>아래 코드는 <code>READ_CONTACTS</code> 기능에 대해 permission을 가지고 있는지 확인하며, permission이 없다면 요청한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Here, thisActivity is the current activity</span></div><div class="line"><span class="keyword">if</span> (ContextCompat.checkSelfPermission(thisActivity,</div><div class="line">                Manifest.permission.READ_CONTACTS)</div><div class="line">        != PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line"></div><div class="line">    <span class="comment">// Should we show an explanation?</span></div><div class="line">    <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,</div><div class="line">            Manifest.permission.READ_CONTACTS)) &#123;</div><div class="line"></div><div class="line">        <span class="comment">// Show an expanation to the user *asynchronously* -- don't block</span></div><div class="line">        <span class="comment">// this thread waiting for the user's response! After the user</span></div><div class="line">        <span class="comment">// sees the explanation, try again to request the permission.</span></div><div class="line"></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">        <span class="comment">// No explanation needed, we can request the permission.</span></div><div class="line"></div><div class="line">        ActivityCompat.requestPermissions(thisActivity,</div><div class="line">                <span class="keyword">new</span> String[]&#123;Manifest.permission.READ_CONTACTS&#125;,</div><div class="line">                MY_PERMISSIONS_REQUEST_READ_CONTACTS);</div><div class="line"></div><div class="line">        <span class="comment">// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an</span></div><div class="line">        <span class="comment">// app-defined int constant. The callback method gets the</span></div><div class="line">        <span class="comment">// result of the request.</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Permission-request-response"><a href="#Permission-request-response" class="headerlink" title="Permission request response"></a>Permission request response</h3><p>Permission을 사용자에게 요청 시 dialog box를 보여주게 된다. 사용자가 allow/deny를 입력하면 시스템은 어플리케이션의 <code>onRequestPermissionsResult()</code> 메소드를 호출한다.</p>
<p>어플리케이션에서 보낸 <code>requestPermission()</code>에 대해 동일한 request code가 도착하는지 확인하기 위해 callback 함수인 <code>onRequestPermissionResult()</code>를 override 해야한다.</p>
<p>아래 예시는 <code>READ_CONTACTS</code> 권한을 요청하고 callback 받는 것이다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode,</span></span></div><div class="line">        String permissions[], <span class="keyword">int</span>[] grantResults) &#123;</div><div class="line">    <span class="keyword">switch</span> (requestCode) &#123;</div><div class="line">        <span class="keyword">case</span> MY_PERMISSIONS_REQUEST_READ_CONTACTS: &#123;</div><div class="line">            <span class="comment">// If request is cancelled, the result arrays are empty.</span></div><div class="line">            <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span></div><div class="line">                &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</div><div class="line"></div><div class="line">                <span class="comment">// permission was granted, yay! Do the</span></div><div class="line">                <span class="comment">// contacts-related task you need to do.</span></div><div class="line"></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">                <span class="comment">// permission denied, boo! Disable the</span></div><div class="line">                <span class="comment">// functionality that depends on this permission.</span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// other 'case' lines to check for other</span></div><div class="line">        <span class="comment">// permissions this app might request</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Permission-잘-사용하기"><a href="#Permission-잘-사용하기" class="headerlink" title="Permission 잘 사용하기"></a>Permission 잘 사용하기</h3><h4 id="Intent의-사용을-고려하라"><a href="#Intent의-사용을-고려하라" class="headerlink" title="Intent의 사용을 고려하라"></a>Intent의 사용을 고려하라</h4><p>App에서 task를 수행하기 위한 방법은 크게 두 가지가 있다.</p>
<ul>
<li>App이 task를 스스로 수행하게 하는 것</li>
<li>Intent를 던져서 다른 어플리케이션이 task를 수행하게 하는 것</li>
</ul>
<p>사진을 찍고 싶으면 CAMERA permission을 요청하여 카메라 제어와 관련된 모든 permission을 가지고 올 수 있다. 하지만 ACTION_IMAGE_CAPTURE intent를 날려서 사진을 찍을 수도 있다.</p>
<p>이 intent를 던지면 카메라 app을 설정하라는 dialog가 발생한다. 만약 default app으로 설정된게 있으면 안 뜬다. 사용자가 사진을 찍고 나면 <code>onActivityResult()</code>를 통해 사진을 callback받을 수 있다.</p>
<p>이 두 가지 방법은 이 세상 이치가 그렇듯 각각의 장단점이 있었으니…</p>
<ul>
<li>Permission 사용 시<ul>
<li>App이 모든 제어권을 갖지만 그에 따른 모든 UI를 설계해야 하기 때문에 App이 복잡해진다.</li>
<li>한 번 permission을 받으면 계속 사용할 수 있지만 사용자가 permission 획득을 거부한다면 어플리케이션은 무용지물이 된다.</li>
</ul>
</li>
<li>Intent 사용 시 <ul>
<li>수행 동작들에 대한 UI를 구성할 필요가 없으며 intent를 처리하는 어플리케이션이 준비한 UI를 사용한다. 하지만 이는 곧 UX를 제공할 수 없다는 말이 된다.</li>
<li>사용자가 default app을 지정하지 않았다면 system은 app을 고르는 화면을 보여줄 것이다. 사용자가 default handler를 지정하지 않으면 동작이 수행될 때마다 dialog를 띄워줄 것이다.</li>
</ul>
</li>
</ul>
<h4 id="꼭-필요한-permission만-요청하라"><a href="#꼭-필요한-permission만-요청하라" class="headerlink" title="꼭 필요한 permission만 요청하라"></a>꼭 필요한 permission만 요청하라</h4><p>Android 6.0 이상의 버전에서는 permission이 필요한 기능을 새로 수행할 때마다 사용자에게 수행할 것인지 묻는다. 사용자 입장에서 여러가지 기능에 대해 자꾸 물어보면 짜증나니까 꼭 필요한 permission만 사용하고 요청하도록 한다.</p>
<p>어플리케이션의 core가 되는 기능이 아니라면 왠만하면 intent를 던져서 사용하자.</p>
<h4 id="쓸데없이-permission을-많이-가져가지-말아라"><a href="#쓸데없이-permission을-많이-가져가지-말아라" class="headerlink" title="쓸데없이 permission을 많이 가져가지 말아라"></a>쓸데없이 permission을 많이 가져가지 말아라</h4><p>한 번에 너무 많은 permission을 요청할 경우, 어플리케이션이 종료될 수도 있다.</p>
<p>어플리케이션 구동에 있어서 꼭 필요한 permission은 어플리케이션이 처음 실행될 때 획득할 수 있게 처리하는 것이 좋다.</p>
<p>예를 들어, 사진 어플리케이션이 처음 구동될 때 카메라 제어에 대한 permission을 받는 것이 좋지만 <code>READ_CONTACTS</code>등의 permission은 주소록을 통한 공유 등 그 기능이 처음 수행될 때 받는 것이 좋다는 이야기이다.</p>
<h4 id="그-Permission이-왜-필요한지-사용자에게-설명하라"><a href="#그-Permission이-왜-필요한지-사용자에게-설명하라" class="headerlink" title="그 Permission이 왜 필요한지 사용자에게 설명하라"></a>그 Permission이 왜 필요한지 사용자에게 설명하라</h4><p><code>requestPermissions()</code>를 호출하면 permission dialog가 뜬다. 하지만 왜 이 permission을 획득해야 하는지는 알려주지 않는다. Permission을 요청하면 사용자는 왜 이 permission이 필요한지 궁금해진다.</p>
<p>예를 들어, 사진 어플리케이션이 geotag를 위해 location service를 필요로 할 때, 무턱대고 location permission을 요청하면 사용자들은 의아하게 생각한다.</p>
<p>따라서 <code>requestPermissions()</code>를 호출하기 전에 사용자에게 설명해줄 필요가 있다.</p>
<p>사용자에게 알려주는 방법 중 하나는 <code>app tutorial</code>을 넣는 것이다. Demo를 보여줌으로써 사용자가 이 permission이 왜 필요한지 느낄 수 있다.</p>
<h4 id="Permission에-대해-test하는-방법"><a href="#Permission에-대해-test하는-방법" class="headerlink" title="Permission에 대해 test하는 방법"></a>Permission에 대해 test하는 방법</h4><p>API level 23 이상의 단말에서는 아래 방법으로 permission과 관련된 문제 있는 코드를 확인할 수 있다.</p>
<ul>
<li>어플리케이션의 현재 permission 및 관련 경로를 확인한다.</li>
<li>Permission이 필요한 service를 수행하거나 data에 접근을 시도한다.</li>
<li>여러가지 permission을 얻었다 잃었다 하면서 테스트한다. 예를 들어, 카메라 어플리케이션은 <code>CAMERA</code>, <code>READ_CONTACTS</code>, <code>ACCESS_FINE_LOCATION</code>이 필요하다고 할 때, 이 세 가지를 껐다 켰다 하면서 테스트를 진행한다.</li>
</ul>
<h4 id="ADB를-통해-다음-항목들을-시험해볼-수-있다"><a href="#ADB를-통해-다음-항목들을-시험해볼-수-있다" class="headerlink" title="ADB를 통해 다음 항목들을 시험해볼 수 있다."></a><code>ADB</code>를 통해 다음 항목들을 시험해볼 수 있다.</h4><ul>
<li>Permission list를 확인하는 방법<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ adb shell pm list permissions -d -g</div><div class="line">  </div></pre></td></tr></table></figure></li>
<li>permission을 획득/제거하는 방법<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ adb shell pm [grant|revoke] &lt;permission-name&gt; ...</div><div class="line">  </div></pre></td></tr></table></figure>
</li>
</ul>

        </div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- github-001 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5237023707102425"
     data-ad-slot="5100567191"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <footer class="article-footer">
            



    <a data-url="http://lazyrodi.github.io/2016/07/10/2016-07-10-android-permission/" data-id="cj8bj1e7a001w7zw6y1sbofbe" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="http://twitter.com/lazyrodi" target="_blank">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/lazyrodi" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/rss2.xml" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2016/07/11/2016-07-11-life-change-to-hexo/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            Hexo로 변경
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2016/07/04/2016-07-04-osi7-and-tcpip/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">OSI 7 layer and TCP/IP model</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Dev/">Dev</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Dev/android/">android</a></p>
                            <p class="item-title"><a href="/2017/10/02/2017-10-03-android-getting_started_3/" class="title">[Android] Getting Started (3)</a></p>
                            <p class="item-date"><time datetime="2017-10-02T09:00:00.000Z" itemprop="datePublished">2017-10-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Dev/">Dev</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Dev/android/">android</a></p>
                            <p class="item-title"><a href="/2017/10/02/2017-10-02-android-getting_started_2 /" class="title">[Android] Getting Started (2)</a></p>
                            <p class="item-date"><time datetime="2017-10-02T01:00:00.000Z" itemprop="datePublished">2017-10-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Dev/">Dev</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Dev/android/">android</a></p>
                            <p class="item-title"><a href="/2017/10/01/2017-10-01-android-getting_started_1/" class="title">[Android] Getting Started (1)</a></p>
                            <p class="item-date"><time datetime="2017-10-01T01:00:00.000Z" itemprop="datePublished">2017-10-01</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Dev/">Dev</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Dev/Spring/">Spring</a></p>
                            <p class="item-title"><a href="/2017/09/24/2017-09-24-spring-vuejs-semanticui/" class="title">[Spring] Vue.js, Semantic UI 사용하기</a></p>
                            <p class="item-date"><time datetime="2017-09-24T08:22:00.000Z" itemprop="datePublished">2017-09-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Dev/">Dev</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Dev/Spring/">Spring</a></p>
                            <p class="item-title"><a href="/2017/09/23/2017-09-23-spring-header-footer/" class="title">[Spring] Header, Footer 넣기 (Apache Tiles)</a></p>
                            <p class="item-date"><time datetime="2017-09-23T05:22:00.000Z" itemprop="datePublished">2017-09-23</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/STS/" style="font-size: 10px;">STS</a> <a href="/tags/algorithm/" style="font-size: 20px;">algorithm</a> <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/apt-get/" style="font-size: 10px;">apt-get</a> <a href="/tags/bash/" style="font-size: 11.43px;">bash</a> <a href="/tags/big-o/" style="font-size: 10px;">big o</a> <a href="/tags/binarysearchtree/" style="font-size: 10px;">binarysearchtree</a> <a href="/tags/binarytree/" style="font-size: 10px;">binarytree</a> <a href="/tags/chown/" style="font-size: 10px;">chown</a> <a href="/tags/codility/" style="font-size: 10px;">codility</a> <a href="/tags/color/" style="font-size: 10px;">color</a> <a href="/tags/command/" style="font-size: 10px;">command</a> <a href="/tags/complexity/" style="font-size: 10px;">complexity</a> <a href="/tags/computer-memory/" style="font-size: 10px;">computer memory</a> <a href="/tags/conference/" style="font-size: 10px;">conference</a> <a href="/tags/converter/" style="font-size: 10px;">converter</a> <a href="/tags/crud/" style="font-size: 12.86px;">crud</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/data-structure/" style="font-size: 10px;">data structure</a> <a href="/tags/database/" style="font-size: 11.43px;">database</a> <a href="/tags/datastructure/" style="font-size: 15.71px;">datastructure</a> <a href="/tags/design/" style="font-size: 10px;">design</a> <a href="/tags/df/" style="font-size: 10px;">df</a> <a href="/tags/disqus/" style="font-size: 10px;">disqus</a> <a href="/tags/docs/" style="font-size: 15.71px;">docs</a> <a href="/tags/docthread/" style="font-size: 12.86px;">docthread</a> <a href="/tags/eclipse/" style="font-size: 11.43px;">eclipse</a> <a href="/tags/electron/" style="font-size: 10px;">electron</a> <a href="/tags/famous-quotes/" style="font-size: 10px;">famous quotes</a> <a href="/tags/fileio/" style="font-size: 10px;">fileio</a> <a href="/tags/fire/" style="font-size: 10px;">fire</a> <a href="/tags/footer/" style="font-size: 10px;">footer</a> <a href="/tags/gerrit/" style="font-size: 11.43px;">gerrit</a> <a href="/tags/git/" style="font-size: 17.14px;">git</a> <a href="/tags/gitweb/" style="font-size: 10px;">gitweb</a> <a href="/tags/graphic/" style="font-size: 10px;">graphic</a> <a href="/tags/header/" style="font-size: 10px;">header</a> <a href="/tags/hexo/" style="font-size: 11.43px;">hexo</a> <a href="/tags/hire/" style="font-size: 10px;">hire</a> <a href="/tags/hr/" style="font-size: 11.43px;">hr</a> <a href="/tags/ifconfig/" style="font-size: 10px;">ifconfig</a> <a href="/tags/image/" style="font-size: 11.43px;">image</a> <a href="/tags/intent/" style="font-size: 10px;">intent</a> <a href="/tags/interview/" style="font-size: 11.43px;">interview</a> <a href="/tags/java/" style="font-size: 17.14px;">java</a> <a href="/tags/javascript/" style="font-size: 11.43px;">javascript</a> <a href="/tags/jekyll/" style="font-size: 10px;">jekyll</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/korean/" style="font-size: 10px;">korean</a> <a href="/tags/license/" style="font-size: 10px;">license</a> <a href="/tags/link/" style="font-size: 10px;">link</a> <a href="/tags/linkedlist/" style="font-size: 10px;">linkedlist</a> <a href="/tags/linux/" style="font-size: 11.43px;">linux</a> <a href="/tags/mediarecorder/" style="font-size: 10px;">mediarecorder</a> <a href="/tags/mysql/" style="font-size: 11.43px;">mysql</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/opensource/" style="font-size: 10px;">opensource</a> <a href="/tags/osi7/" style="font-size: 10px;">osi7</a> <a href="/tags/parser/" style="font-size: 10px;">parser</a> <a href="/tags/pattern/" style="font-size: 10px;">pattern</a> <a href="/tags/permission/" style="font-size: 10px;">permission</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/queue/" style="font-size: 11.43px;">queue</a> <a href="/tags/quick-guide/" style="font-size: 10px;">quick guide</a> <a href="/tags/refactoring/" style="font-size: 10px;">refactoring</a> <a href="/tags/regex/" style="font-size: 10px;">regex</a> <a href="/tags/regular-expression/" style="font-size: 10px;">regular expression</a> <a href="/tags/ruby/" style="font-size: 10px;">ruby</a> <a href="/tags/ruby-on-rails/" style="font-size: 12.86px;">ruby on rails</a> <a href="/tags/scalable/" style="font-size: 10px;">scalable</a> <a href="/tags/screen/" style="font-size: 10px;">screen</a> <a href="/tags/semantic-ui/" style="font-size: 10px;">semantic ui</a> <a href="/tags/setting/" style="font-size: 14.29px;">setting</a> <a href="/tags/settings/" style="font-size: 10px;">settings</a> <a href="/tags/singleton/" style="font-size: 10px;">singleton</a> <a href="/tags/sonarqube/" style="font-size: 10px;">sonarqube</a> <a href="/tags/sort/" style="font-size: 10px;">sort</a> <a href="/tags/spring/" style="font-size: 18.57px;">spring</a> <a href="/tags/springboot/" style="font-size: 11.43px;">springboot</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/stack/" style="font-size: 10px;">stack</a> <a href="/tags/string/" style="font-size: 10px;">string</a> <a href="/tags/stringbuffer/" style="font-size: 10px;">stringbuffer</a> <a href="/tags/stringbuilder/" style="font-size: 10px;">stringbuilder</a> <a href="/tags/stringtokenizer/" style="font-size: 10px;">stringtokenizer</a> <a href="/tags/structure/" style="font-size: 10px;">structure</a> <a href="/tags/study/" style="font-size: 12.86px;">study</a> <a href="/tags/svg/" style="font-size: 10px;">svg</a> <a href="/tags/tcp-ip/" style="font-size: 10px;">tcp/ip</a> <a href="/tags/thread/" style="font-size: 10px;">thread</a> <a href="/tags/tiles/" style="font-size: 10px;">tiles</a> <a href="/tags/translate/" style="font-size: 10px;">translate</a> <a href="/tags/tree/" style="font-size: 11.43px;">tree</a> <a href="/tags/troubleshooting/" style="font-size: 12.86px;">troubleshooting</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/ui/" style="font-size: 10px;">ui</a> <a href="/tags/ux/" style="font-size: 10px;">ux</a> <a href="/tags/vector/" style="font-size: 11.43px;">vector</a> <a href="/tags/video/" style="font-size: 10px;">video</a> <a href="/tags/visualization/" style="font-size: 10px;">visualization</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/vuejs/" style="font-size: 10px;">vuejs</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/windows-10/" style="font-size: 11.43px;">windows 10</a> <a href="/tags/work/" style="font-size: 10px;">work</a> <a href="/tags/wysiwyg-editor/" style="font-size: 10px;">wysiwyg editor</a>
        </div>
    </div>


            
        
    </div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- github-001 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5237023707102425"
     data-ad-slot="5100567191"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <div class="logo-wrap" style="float:left">
                    <img src="/images/50x50_lazyrodi.jpg" id="copyright-img">
                    <!-- <a href="/" class="logo"></a> -->
                </div>
                <div style="padding: 7px 0px 0px 60px;">
                    <p>&copy; 2017 Lazy Rodriguez</p>
                    <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
                </div>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'lazyrodi';
    
    
    var disqus_url = 'http://lazyrodi.github.io/2016/07/10/2016-07-10-android-permission/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>



    
        <script src="/vendor/fancybox/jquery.fancybox.pack.js"></script>
    

    
        <script src="/vendor/scrollLoading/jquery.scrollLoading.js"></script>
        <script src="/vendor/scrollLoading/main.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
